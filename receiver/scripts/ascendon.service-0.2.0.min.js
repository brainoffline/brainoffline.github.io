/* CSG International Inc. service library
* Copyright 2015 CSG International Inc.
* All Rights Reserved.
* Last build : 6/9/2015, 10:57:24 AM 
* git revision : 57d6308 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.ascendon||(b.ascendon={})).service=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./events"),f=a("./settings");b.exports=function(a,b,c){if(!f.apiUrl){var g=d.Deferred();return g.reject({Code:0,Message:"config method has not been called, or was not passed a valid apiURL.  Skipping "+a.method,Severity:4}),e.trigger("failure"),g.promise()}var h;if("subscriber"===a.domain.toLowerCase())h={dataType:"json",type:"POST",url:f.apiUrl+"/"+a.domain+"/"+a.method,headers:{"cd-distributionchannel":f.channelId,"cd-devicetype":f.deviceType,"cd-subscriberid":f.subscriberId,"cd-systemid":f.systemId},data:JSON.stringify(a.data)},b||(h.headers["cd-sessionid"]=f.sessionId),c&&(h.headers["cd-clonesession"]="true");else{var i=f.apiUrl.replace("services","metadata")+"/"+a.method+"/DeviceType/"+f.deviceType+"/DistributionChannel/"+f.channelId+"/SystemId/"+f.systemId+"/Language/"+f.language;Object.keys(a.data).forEach(function(b){i+="/"+b+"/"+a.data[b]}),h={dataType:"json",type:"GET",url:i}}var j=d.Deferred();return d.ajax(h).done(function(b,d,f){b&&(b.Fault?(e.trigger("error",[b.Fault]),j.reject(b.Fault,"error",f)):(c&&(b.ClonedSessionId=f.getResponseHeader("cd-clonedsessionid")),j.resolve(b,d,f),e.trigger("success."+a.method,b)))}).fail(function(a,b,c){e.trigger("error",c),j.reject(a,b,c)}),j.promise()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./events":4,"./settings":7}],2:[function(a,b,c){"use strict";var d=a("./subscriber.js"),e=a("./metadata.js"),f=a("./simple.js"),g=a("./settings.js"),h=a("./ajaxWrapper.js"),i=a("./events.js"),j=a("./cache.js");b.exports={subscriber:d,metadata:e,simple:f,settings:g,events:i,ajax:h,cache:j}},{"./ajaxWrapper.js":1,"./cache.js":3,"./events.js":4,"./metadata.js":6,"./settings.js":7,"./simple.js":10,"./subscriber.js":18}],3:[function(a,b,c){(function(a){"use strict";var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports={items:{},add:function(a,b){return void 0!==b&&void 0!==a?(this.items[a]=b,!0):!1},clearAll:function(){return this.items={},!0},get:function(a){return void 0!==a&&"string"==typeof a?void 0!==this.items[a]?this.items[a]:void 0:!1},getKeys:function(){if(void 0!==this.items){var a=[];return c.each(this.items,function(b){a.push(b)}),void 0!==a&&a.length>0?a:!1}return!1},hasKey:function(a){return void 0!==a&&"string"==typeof a&&void 0!==this.items[a]?!0:!1},multi:function(a,b){if(!(void 0!==b&&void 0!==a&&b.length===a.length&&b.length>0))return!1;for(var c=0,d=b.length;d>c;c+=1){var e=b[c],f=a[c];void 0!==e&&void 0!==f&&this.add(f,e)}},remove:function(a){return void 0!==a?(void 0!==this.items[a]&&delete this.items[a],!0):!1}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=c({})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(a,b,c){"use strict";b.exports={resources:{systemError:{Code:-1,Message:"There was a fatal system error."},invalidMediaResponse:{Code:5e5,Message:"Invalid Media metadata response"},invalidViewContentResponse:{Code:500001,Message:"Invalid ViewContent response"},invalidRetrieveStorefrontPageContextResponse:{Code:500002,Message:"Invalid RetrieveStorefrontPageContext response"},invalidStorefrontMetadataResponse:{Code:500003,Message:"Invalid Storefront metadata response"},invalidRetrieveCategoryContextResponse:{Code:500004,Message:"Invalid RetrieveCategoryContext response"},retrieveWalletAndPaymentInstrumentsFailure:{Code:600001,Message:"Could not retrieve Payment Instruments."},subscriberNoCategoriesForContext:{Code:700001,Message:"No categories were returned."}},getFault:function(a){if(void 0!==a&&"string"==typeof a){if(this.resources[a]&&void 0!==this.resources[a]){var b=this.resources[a];return b.Severity=4,b}return{Code:-1,Message:"The fault resource key is invalid.",Severity:4}}return{Code:-1,Message:"A fault resource key is required.",Severity:4}}}},{}],6:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js");b.exports={domain:"Metadata",categories:function(a){var b={method:"Categories",domain:this.domain,data:a};return d(b)},codes:function(a){var b={method:"Codes",domain:this.domain,data:{Type:a}};return d(b)},coupons:function(a){var b={method:"Coupons",domain:this.domain,data:a};return d(b)},discretionaryDiscounts:function(a){var b={method:"DiscretionaryDiscounts",domain:this.domain,data:a};return d(b)},media:function(a){var b={method:"Media",domain:this.domain,data:{Id:a||0}};return d(b)},peopleForBrowse:function(){var a={method:"PeopleForBrowse",domain:this.domain};return d(a)},person:function(a){var b={method:"Person",domain:this.domain,data:{Id:a||0}};return d(b)},ping:function(){var a={method:"Ping",domain:this.domain};return d(a)},playlist:function(a){var b={method:"Playlist",domain:this.domain,data:a};return d(b)},product:function(a){var b={method:"Product",domain:this.domain,data:a};return d(b)},promotion:function(a){var b={method:"Promotion",domain:this.domain,data:a};return d(b)},searchSuggestions:function(a){var b={method:"SearchSuggestions",domain:this.domain,data:a};return d(b)},storefront:function(){var a={method:"Storefront",domain:this.domain};return d(a)},storefrontPage:function(a){var b={method:"StorefrontPage",domain:this.domain,data:a};return d(b)}}},{"./ajaxWrapper.js":1}],7:[function(a,b,c){"use strict";b.exports={systemId:null,channelId:null,apiUrl:null,deviceType:null,language:null,configure:function(a){this.systemId=a.systemId,this.channelId=a.channelId,this.apiUrl=a.apiUrl,this.deviceType=a.deviceType,this.language=a.language}}},{}],8:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./metadata.js"),f=a("./subscriber.browse.js"),g=a("./utility.js"),h=a("./fault.js");b.exports={domain:"Simple",retrieveStorefrontPageAndMetadata:function(a){var b,c,i,j=d.Deferred(),k=[];return f.retrieveStorefrontPageContext({Id:a.Id,ReturnAvailablePages:a.ReturnAvailablePages}).done(function(a){a&&a.Id?a.QualifiedStorefrontPageIds&&a.QualifiedStorefrontPageIds.length>0?(b=g.retrieveQualifiedStorefrontPageId(a.Id,a.QualifiedStorefrontPageIds),c=a.NonQualifiedProductIds||[],k.push(e.storefrontPage({Id:b})),k.push(f.retrieveCategoryContext()),d.when.apply(null,k).done(function(a,b){if(!a||!a[0]||!a[0].Page)return j.reject(h.resources.invalidStorefrontMetadataResponse),!1;if(!b||!b[0])return j.reject(h.resources.invalidRetrieveCategoryContextResponse),!1;var d={Name:a[0].Page.Name||"",Id:a[0].Page.Id,Buckets:a[0].Page.Buckets||[],FeaturedItems:a[0].Page.FeaturedItems||[]};i=b[0].NonQualifiedCategoryIds||[],i.length>0&&(d.Buckets=g.filterBuckets(d.Buckets,i)),c.length>0&&(d.Buckets=g.filterBucketProducts(d.Buckets,c),d.FeaturedItems.length>0&&(d.FeaturedItems=g.filterFeaturedItems(d.FeaturedItems,c))),j.resolve(d)}).fail(function(a){j.reject(a)})):j.reject(h.resources.noQualifiedStorefrontPagesAvailable):j.reject(h.resources.invalidStorefrontPageContextResponse)}).fail(function(a){j.reject(a)}),j.promise()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fault.js":5,"./metadata.js":6,"./subscriber.browse.js":15,"./utility.js":23}],9:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./metadata.js"),f=a("./subscriber.content.js"),g=a("./fault.js");b.exports={domain:"Simple",viewContentAndMetadata:function(a){var b=d.Deferred(),c=[];return f.viewContent(a).done(function(a){a&&a.MediaId?e.media(a.MediaId).done(function(d){if(d&&d.Media){if(d&&d.Media&&d.Media.ClosedCaptions){var e="ClosedCaptionSettings"in d.Media.ClosedCaptions?d.Media.ClosedCaptions.ClosedCaptionSettings:null,f=d.Media.Markers||null;if(e&&e.length>0)for(var h in e)c.push({lang:e[h].Language,url:e[h].Url,label:e[h].Language});else if(f&&f.length>0)for(var i=0;i<f.length;i+=1){var j=f[i].ExternalConfiguration;if(j&&4===j.ExternalTypeCode)for(var k in j.Fields){var l=j.Fields[k];21===l.ExternalTypeFieldCode&&c.push({lang:"caption_"+String(i+1),url:l.FieldValue,label:"Caption_"+String(i+1)})}}}var m={AssociatedProductLobDeliveryCapabilityId:d.Media.AssociatedProductLobDeliveryCapabilityId,AvailableMedia:a.AvailableMedia,ChapterAlias:d.Media.ChapterAlias,Chapters:d.Media.Chapters,ClipDurationSeconds:d.Media.ClipDurationSeconds,ClipStartSeconds:d.Media.ClipStartSeconds,ContentUrl:a.ContentUrl,DisplayName:d.Media.DisplayName,DowngradedDueToOutputProtection:a.DowngradedDueToOutputProtection,HasInstream:d.Media.ClosedCaptions?d.Media.ClosedCaptions.HasInstream:null,LicenseRequestToken:a.LicenseRequestToken,Markers:d.Media.Markers,MediaId:d.Media.Id,ProgressSeconds:a.ProgressSeconds,Name:d.Media.Name,PauseForMarker:d.Media.PauseForMarker,SideloadedCaptions:c,ThumbnailUrl:d.Media.ThumbnailUrl,Type:d.Media.Type,UpdatedPolicies:a.UpdatedPolicies,ViewContentReference:a.ViewContentReference};b.resolve(m)}else b.reject(g.resources.invalidMediaResponse)}).fail(function(a){b.reject(a)}):b.reject(g.resources.invalidViewContentResponse)}).fail(function(a){b.reject(a)}),b.promise()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fault.js":5,"./metadata.js":6,"./subscriber.content.js":16}],10:[function(a,b,c){"use strict";var d=a("./simple.product.js"),e=a("./simple.browse.js"),f=a("./simple.content.js"),g=a("./simple.metadata.js");b.exports={domain:"Simple",product:d,browse:e,content:f,metadata:g}},{"./simple.browse.js":8,"./simple.content.js":9,"./simple.metadata.js":11,"./simple.product.js":12}],11:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./metadata.js"),f=a("./fault.js");b.exports={domain:"Simple",guidanceRatings:function(){var a=d.Deferred(),b={ratings:[],categories:[]},c=[];return c.push(e.codes(33)),c.push(e.codes(32)),d.when.apply(null,c).done(function(){d.each(arguments,function(a,c){0===a?b.ratings=c[0].Codes:1===a&&(b.categories=c[0].Codes)}),void 0!==b.ratings&&void 0!==b.categories?a.resolve(b):a.reject(f.getFault("systemError"))}).fail(function(){a.reject(f.getFault("systemError"))}),a.promise()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fault.js":5,"./metadata.js":6}],12:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./metadata.js"),f=a("./subscriber.order.js");b.exports={domain:"Simple",retrieveProduct:function(a){var b=d.Deferred();return e.product({Id:a.ProductId}).done(function(c){if(a.IncludeContext){var e={ProductId:a.ProductId,IncludeOrderablePricingPlans:!0,IncludeEntitlementContext:!0};if(a.RedemptionCodes&&a.RedemptionCodes.length>0&&(e.RedemptionCodes=a.RedemptionCodes),c&&c.Product&&c.Product.ReferencedProducts&&c.Product.ReferencedProducts.length>0&&a.IncludeCompleteReferencedProducts){var g=[],h=[];d.each(c.Product.ReferencedProducts,function(a){g.push(a.Key)});for(var i=g.length/50+(g.length%50===0&&g.length>0?0:1),j=0;i>j;j+=1)i>1&&(e.EpisodicChildProducts=g.slice(50*j,50*j+50)),h.push(f.retrieveProductContext(e));h.length>0&&d.when.apply(null,h).done(function(){var e=[];if(h&&1===h.length?e.push(arguments[0]):d.each(arguments,function(a,b){e.push(b[0].ProductContext)}),c&&(a.IncludeContext&&e||!a.IncludeContext&&!e)){var f={product:c.Product};a.IncludeContext&&(f.contexts=e),b.resolve(f)}else b.reject({Message:"Error retrieving a complete product"})}).fail(function(a){b.reject(a)})}else f.retrieveProductContext(e).done(function(a){var d={product:c.Product,contexts:[a.ProductContext]};b.resolve(d)}).fail(function(a){b.reject(a)})}else b.resolve({product:c.Product})}).fail(function(a){b.reject(a)}),b.promise()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./metadata.js":6,"./subscriber.order.js":19}],13:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js");b.exports={domain:"Subscriber",activateExternalContent:function(){var a={method:"ActivateExternalContent",domain:this.domain};return d(a)},emailLogin:function(a){var b={method:"EmailLogin",domain:this.domain,data:a};return d(b)},generatePassword:function(a){var b={method:"GeneratePassword",domain:this.domain,data:a};return d(b)},linkNewUvUser:function(a){var b={method:"LinkNewUvUser",domain:this.domain,data:a};return d(b)},linkOAuthClient:function(a){var b={method:"LinkOAuthClient",domain:this.domain,data:a};return d(b)},retrieveSubscriber:function(){var a={method:"RetrieveSubscriber",domain:this.domain};return d(a)},retrieveUvUser:function(){var a={method:"RetrieveUvUser",domain:this.domain};return d(a)},updateCredentials:function(a){var b={method:"UpdateCredentials",domain:this.domain,data:a};return d(b)},validateCredentials:function(a){var b={method:"ValidateCredentials",domain:this.domain,data:a};return d(b)}}},{"./ajaxWrapper.js":1}],14:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js");b.exports={domain:"Subscriber",retrieveAddresses:function(a){var b={method:"RetrieveAddresses",domain:this.domain,data:a};return d(b)},retrieveAddress:function(a){var b={method:"RetrieveAddress",domain:this.domain,data:a};return d(b)},updateAddress:function(a){var b={method:"UpdateAddress",domain:this.domain,data:a};return d(b)},createAddress:function(a){var b={method:"CreateAddress",domain:this.domain,data:a};return d(b)},removeAddress:function(a){var b={method:"RemoveAddress",domain:this.domain,data:a};return d(b)},validateAddress:function(a){var b={method:"ValidateAddress",domain:this.domain,data:a};return d(b)}}},{"./ajaxWrapper.js":1}],15:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js");b.exports={domain:"Subscriber",retrieveStorefrontPageContext:function(a){var b={method:"RetrieveStorefrontPageContext",domain:this.domain,data:a};return d(b)},retrieveCategoryContext:function(){var a={method:"RetrieveCategoryContext",domain:this.domain};return d(a)}}},{"./ajaxWrapper.js":1}],16:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js"),e={video:0,preview:1,relatedMedia:2};b.exports={domain:"Subscriber",viewContent:function(a){var b=a;a.PreviewId&&(b.ViewContentType=e.preview);var c={method:"viewcontent",data:b,domain:this.domain};return d(c)},viewContentChromecast:function(a){var b=a;a.PreviewId&&(b.ViewContentType=e.preview);var c={method:"viewcontent",data:b,domain:this.domain};return d(c,!1,!0)},updateContentProgress:function(a){var b={method:"updatecontentprogress",data:a,domain:this.domain};return d(b)},updateMediaRating:function(a){var b={method:"UpdateMediaRating",data:a,domain:this.domain};return d(b)},validateEntitlements:function(a){var b={method:"validateentitlements",data:a,domain:this.domain};return d(b)}}},{"./ajaxWrapper.js":1}],17:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js");b.exports={domain:"Subscriber",generateDeviceRendezvousCode:function(a){var b={method:"GenerateDeviceRendezvousCode",domain:this.domain,data:a};return d(b)},initiateDeviceLeave:function(a){var b={method:"InitiateDeviceLeave",domain:this.domain,data:a};return d(b)},promoteDeviceSession:function(a){var b={method:"PromoteDeviceSession",domain:this.domain,data:a};return d(b)},registerDevice:function(a){var b={method:"RegisterDevice",domain:this.domain,data:a};return d(b)},retrieveDeviceJoinTrigger:function(a){var b={method:"RetrieveDeviceJoinTrigger",domain:this.domain,data:a};return d(b)},retrieveDevicePinStatus:function(){var a={method:"RetrieveDevicePinStatus",domain:this.domain};return d(a)},retrieveDeviceRendezvousStatus:function(a){var b={method:"RetrieveDeviceRendezvousStatus",domain:this.domain,data:a};return d(b)},retrieveDevices:function(){var a={method:"RetrieveDevices",domain:this.domain};return d(a)},unregisterDevice:function(a){var b={method:"UnregisterDevice",domain:this.domain,data:a};return d(b)},updateDevice:function(a){var b={method:"UpdateDevice",domain:this.domain,data:a};return d(b)},updateDevicePin:function(a){var b={method:"UpdateDevicePin",domain:this.domain,data:a};return d(b)}}},{"./ajaxWrapper.js":1}],18:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js"),e=a("./settings.js"),f=a("./subscriber.order.js"),g=a("./subscriber.address.js"),h=a("./subscriber.payment.js"),i=a("./subscriber.subscription.js"),j=a("./subscriber.account.js"),k=a("./subscriber.redeem.js"),l=a("./subscriber.device.js"),m=a("./subscriber.content.js"),n=a("./subscriber.browse.js");b.exports={domain:"Subscriber",address:g,payment:h,order:f,subscription:i,account:j,redeem:k,device:l,content:m,browse:n,searchLocker:function(a){var b={method:"SearchLocker",domain:this.domain,data:a};return d(b,!1)},ping:function(){var a={method:"Ping",domain:this.domain};return d(a,!1)},pingSession:function(){var a={method:"PingSession",domain:this.domain};return d(a,!1)},createSession:function(a){var b={method:"CreateSession",domain:this.domain,data:a};return d(b,!0).done(function(a){a&&(e.sessionId=a.SessionId,a.SessionSummary&&(e.subscriberId=a.SessionSummary.SubscriberId))})},closeSession:function(a){var b={method:"CloseSession",domain:this.domain,data:a};return d(b)},createInteraction:function(a){var b={method:"CreateInteraction",domain:this.domain,data:a};return d(b)},createSubscriber:function(a){var b={method:"CreateSubscriber",domain:this.domain,data:a};return d(b,!0).done(function(b){a.AutoLogin&&b&&(e.sessionId=b.SessionId,b.SessionSummary&&(e.subscriberId=b.SessionSummary.SubscriberId))})},updateExternalAuthorizations:function(a){var b={method:"UpdateExternalAuthorizations",data:a,domain:this.domain};return d(b)},updateFavoriteProducts:function(a){var b={method:"UpdateFavoriteProducts",data:a,domain:this.domain};return d(b)},updateHousehold:function(a){var b={method:"UpdateHousehold",data:a,domain:this.domain};return d(b)},updateHouseholdMembers:function(a){var b={method:"UpdateHouseholdMembers",data:a,domain:this.domain};return d(b)},updatePersonRating:function(a){var b={method:"UpdatePersonRating ",data:a,domain:this.domain};return d(b)},updateProductRating:function(a){var b={method:"UpdateProductRating ",data:a,domain:this.domain};return d(b)},updateQueuedProducts:function(a){var b={method:"UpdateQueuedProducts ",data:a,domain:this.domain};return d(b)},validateUvUser:function(a){var b={method:"ValidateUvUser",data:a,domain:this.domain};return d(b)}}},{"./ajaxWrapper.js":1,"./settings.js":7,"./subscriber.account.js":13,"./subscriber.address.js":14,"./subscriber.browse.js":15,"./subscriber.content.js":16,"./subscriber.device.js":17,"./subscriber.order.js":19,"./subscriber.payment.js":20,"./subscriber.redeem.js":21,"./subscriber.subscription.js":22}],19:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./ajaxWrapper.js");b.exports={domain:"Subscriber",calculateModifyOrderQuote:function(a){var b={method:"CalculateModifyOrderQuote",domain:this.domain,data:a};return e(b)},calculateOrderQuote:function(a){var b={method:"CalculateOrderQuote",domain:this.domain,data:a};return e(b)},calculateRemoveOrderQuote:function(a){var b={method:"CalculateRemoveOrderQuote",domain:this.domain,data:a};return e(b)},calculateRenewOrderQuote:function(a){var b={method:"CalculateRenewOrderQuote",domain:this.domain,data:a};return e(b)},cancelOrder:function(a){var b={method:"CancelOrder",domain:this.domain,data:a};return e(b)},createWishlist:function(a){var b={method:"CreateWishlist",domain:this.domain,data:a};return e(b)},previewGiftRedemptionOrder:function(a){var b={method:"PreviewGiftRedemptionOrder",domain:this.domain,data:a};return e(b)},retrieveOrder:function(a){var b={method:"RetrieveOrder",domain:this.domain,data:a};return e(b)},retrieveProductContext:function(a){var b={method:"RetrieveProductContext",domain:this.domain,data:a};return e(b)},retrieveProductRecommendations:function(a){var b={method:"RetrieveProductRecommendations",domain:this.domain,data:a};return e(b)},retrieveShoppingCart:function(a){var b={method:"RetrieveShoppingCart",domain:this.domain,data:a};return e(b)},searchFavoriteProducts:function(a){var b={method:"SearchFavoriteProducts",domain:this.domain,data:a};return e(b)},searchOrders:function(a){var b={method:"SearchOrders",domain:this.domain,data:a};return e(b)},searchProducts:function(a){var b={method:"SearchProducts",domain:this.domain,data:a};return e(b)},searchProductsByCoupon:function(a){var b={method:"SearchProductsByCoupon",domain:this.domain,data:a};return e(b)},searchQueuedProducts:function(a){var b={method:"SearchQueuedProducts",domain:this.domain,data:a};return e(b)},searchWishlists:function(a){var b={method:"SearchWishlists",domain:this.domain,data:a};return e(b)},searchWishlistProducts:function(a){var b={method:"SearchWishlistProducts",domain:this.domain,data:a};return e(b)},submitAnonymousOrder:function(a){var b={method:"SubmitAnonymousOrder",domain:this.domain,data:a};return e(b)},submitGiftOrder:function(a){var b={method:"SubmitGiftOrder",domain:this.domain,data:a};return e(b)},submitGiftRedemptionOrder:function(a){var b={method:"SubmitGiftRedemptionOrder",domain:this.domain,data:a};return e(b)},submitModifyOrder:function(a){var b={method:"SubmitModifyOrder",domain:this.domain,data:a};return e(b)},submitAnonymousGiftOrder:function(a){var b={method:"SubmitAnonymousGiftOrder",domain:this.domain,data:a};return e(b)},submitOrder:function(a){var b={method:"SubmitOrder",domain:this.domain,data:a};return e(b)},submitRemoveOrder:function(a){var b={method:"SubmitRemoveOrder",domain:this.domain,data:a};return e(b)},submitRenewOrder:function(a){var b={method:"SubmitRenewOrder",domain:this.domain,data:a};return e(b)},submitRestoreOrder:function(a){var b={method:"SubmitRestoreOrder",domain:this.domain,data:a};return e(b)},submitSupportEmail:function(a){var b={method:"SubmitSupportEmail",domain:this.domain,data:a};return e(b)},submitUpgradeOrder:function(a){var b={method:"SubmitUpgradeOrder",domain:this.domain,data:a};return e(b)},updateShoppingCart:function(a){var b={method:"UpdateShoppingCart",domain:this.domain,data:a};return e(b)},updateWishlist:function(a){var b={method:"UpdateWishlist",domain:this.domain,data:a};return e(b)},updateWishlistProducts:function(a){var b={method:"UpdateWishlistProducts",domain:this.domain,data:a};return e(b)},redeemCoupon:function(a){var b=this,c=d.Deferred();return d.when(b.searchProductsByCoupon({PageNumber:1,PageSize:100,RedemptionCode:a.RedemptionCode})).done(function(e){if(void 0!==e&&e.Products.length>0){for(var f=[],g=0,h=e.Products.length;h>g;g+=1){var i=b.retrieveProductContext({ProductId:e.Products[g].Id,IncludeOrderablePricingPlans:!0,RedemptionCodes:[a.RedemptionCode]});i&&void 0!==i&&f.push(i)}f&&void 0!==f?d.when.apply(null,f).done(function(){var e=[];d.each(arguments,function(a,b){var c=b[0].ProductContext;if(c&&c.OrderablePricingPlans){for(var d,f=!1,g=0;g<c.OrderablePricingPlans.length&&!f;g+=1)c.OrderablePricingPlans[g].CouponApplied&&0===c.OrderablePricingPlans[g].DiscountedAmount&&(d=c.OrderablePricingPlans[g].Id,f=!0);f&&e.push({ProductId:c.ProductId,PricingPlanId:d,Quantity:1})}}),e.length>0?d.when(b.submitOrder({ShoppingCart:{Items:e},RedemptionCodes:[a.RedemptionCode]})).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}):c.reject({Message:"No Orderable Products for Coupon"})}).fail(function(a){c.reject(a)}):c.reject()}else c.reject({Message:"No Products for Coupon"})}).fail(function(a){c.reject(a)}),c.promise()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajaxWrapper.js":1}],20:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./ajaxWrapper.js"),f=a("./subscriber.address.js"),g=a("./fault.js");b.exports={domain:"Subscriber",chargePaymentInstrument:function(a){var b={method:"ChargePaymentInstrument",domain:this.domain,data:a};return e(b)},completeOrderPayment:function(a){var b={method:"CompleteOrderPayment",domain:this.domain,data:a};return e(b)},createPaymentInstrument:function(a){var b={method:"CreatePaymentInstrument",domain:this.domain,data:a};return e(b)},removePaymentInstrument:function(a){var b={method:"RemovePaymentInstrument",domain:this.domain,data:a};return e(b)},retrievePayPalToken:function(){var a={method:"RetrievePayPalToken",domain:this.domain};return e(a)},retrievePaymentInstrument:function(a){var b={method:"RetrievePaymentInstrument",domain:this.domain,data:a};return e(b)},searchTransactions:function(a){var b={method:"SearchTransactions ",domain:this.domain,data:a};return e(b)},updatePaymentInstrument:function(a){var b={method:"UpdatePaymentInstrument",domain:this.domain,data:a};return e(b)},validatePaymentInstrument:function(a){var b={method:"ValidatePaymentInstrument",domain:this.domain,data:a};return e(b)},retrieveWallet:function(a){var b={method:"RetrieveWallet ",domain:this.domain,data:a};return e(b)},retrieveWalletWithDetails:function(a,b,c){var h=this,i=d.Deferred(),j={wallet:{},retrievedPaymentInstruments:[],addresses:[]},k={method:"RetrieveWallet",domain:this.domain,data:a},l=[],m=[];return e(k).done(function(a){if(void 0!==a){if(j.wallet=a,void 0!==b&&b!==!1||void 0!==c&&c!==!1||i.resolve(j),void 0!==b&&b===!0)if(void 0!==a.PaymentInstruments&&a.PaymentInstruments.length>0){for(var e=0,k=a.PaymentInstruments.length;k>e;e+=1)l.push(a.PaymentInstruments[e].Id);if(void 0!==l&&l.length>0){for(var n=0,o=l.length;o>n;n+=1){var p=h.retrievePaymentInstrument({Id:l[n]});p&&void 0!==p&&m.push(p)}m&&void 0!==m?d.when.apply(null,m).done(function(){d.each(arguments,function(a,b){l.length>1?j.retrievedPaymentInstruments.push(b[0].PaymentInstrument):j.retrievedPaymentInstruments.push(b.PaymentInstrument)}),void 0===j.retrievedPaymentInstruments||0===j.retrievedPaymentInstruments.length?i.reject(g.getFault("retrieveWalletAndPaymentInstrumentsFailure")):(void 0===c||c===!1)&&i.resolve(j)}).fail(function(){i.reject(g.getFault("retrieveWalletAndPaymentInstrumentsFailure"))}):i.reject(g.getFault("retrieveWalletAndPaymentInstrumentsFailure"))}else i.reject(g.getFault("retrieveWalletAndPaymentInstrumentsFailure"))}else(void 0===c||c===!1)&&i.resolve(j);void 0!==c&&c===!0&&f.retrieveAddresses().done(function(a){a&&void 0!==a&&(a.Addresses&&void 0!==a.Addresses&&a.Addresses.length>0&&(j.addresses=a.Addresses),i.resolve(j))}).fail(function(a){i.reject(a)})}else i.reject(g.getFault("systemError"))}).fail(function(){i.reject(g.getFault("systemError"))}),i.promise()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajaxWrapper.js":1,"./fault.js":5,"./subscriber.address.js":14}],21:[function(a,b,c){"use strict";var d=a("./ajaxWrapper.js");b.exports={domain:"Subscriber",activateDiscounts:function(a){var b={method:"ActivateDiscounts",domain:this.domain,data:a};return d(b)},applyCoupon:function(a){var b={method:"ApplyCoupon",domain:this.domain,data:a};return d(b)},redeemGiftCard:function(a){var b={method:"RedeemGiftCard",domain:this.domain,data:a};return d(b)},retrieveCouponStatistics:function(a){var b={method:"RetrieveCouponStatistics",domain:this.domain,data:a};return d(b)},searchRedemptionCodes:function(a){var b={method:"SearchRedemptionCodes",domain:this.domain,data:a};return d(b)}}},{"./ajaxWrapper.js":1}],22:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a("./ajaxWrapper.js"),f=a("./metadata.js"),g=a("./fault.js");b.exports={domain:"Subscriber",createExternalAuthorizations:function(a){var b={method:"CreateExternalAuthorizations",domain:this.domain,data:a};return e(b)},createHousehold:function(a){var b={method:"CreateHousehold",domain:this.domain,data:a};return e(b)},retrieveSubscriber:function(){var a={method:"RetrieveSubscriber",domain:this.domain};return e(a)},retrieveSubscriberContext:function(){var a={method:"RetrieveSubscriberContext",domain:this.domain};return e(a)},retrieveSubscription:function(a){var b={method:"RetrieveSubscription",domain:this.domain,data:a};return e(b)},removeContentViews:function(a){var b={method:"RemoveContentViews",domain:this.domain,data:a};return e(b)},removeHousehold:function(a){var b={method:"RemoveHousehold",domain:this.domain,data:a};return e(b)},retrieveCategoryContext:function(){var a={method:"RetrieveCategoryContext",domain:this.domain};return e(a)},retrieveCategoriesForCategoryContext:function(a){var b=this,c=d.Deferred(),e={categories:[]},h=[],i=[],j=[];return j.push(b.retrieveCategoryContext()),j.push(f.categories(a)),d.when.apply(null,j).done(function(){if(d.each(arguments,function(a,b){0===a?h=b[0].NonQualifiedCategoryIds:1===a&&(i=b[0].Categories)}),void 0!==h&&h.length>0&&void 0!==i&&i.length>0){for(var a=i,b=0,f=h.length;f>b;b+=1)for(var j=0,k=a.length;k>j;j+=1)if(a[j].Id===h[b])a.splice(j,1);else if(void 0!==a[j].Children&&a[j].Children.length>0)for(var l=0,m=a[j].Children.length;m>l;l+=1)a[j].Children[l].Id===h[b]&&a[j].Children.splice(l,1);void 0!==a&&a.length>0?(e.categories=a,c.resolve(e)):c.reject(g.getFault("subscriberNoCategoriesForContext"))}else void 0!==h&&0===h.length&&void 0!==i&&i.length>0?(e.categories=i,c.resolve(e)):c.reject(g.getFault("systemError"))}).fail(function(){c.reject(g.getFault("systemError"))}),c.promise()},retrieveHouseholds:function(a){var b={method:"RetrieveHouseholds",domain:this.domain,data:a};return e(b)},retrievePersonContext:function(a){var b={method:"RetrievePersonContext",domain:this.domain,data:a};return e(b)},retrievePlaylistContext:function(a){var b={method:"RetrievePlaylistContext",domain:this.domain,data:a};return e(b)},searchContentViews:function(a){var b={method:"SearchContentViews",domain:this.domain,data:a};return e(b)},searchPersons:function(a){var b={method:"SearchPersons",domain:this.domain,data:a};return e(b)},searchSubscriptions:function(a){var b={method:"SearchSubscriptions",domain:this.domain,data:a};return e(b)},updateSubscriber:function(a){var b={method:"UpdateSubscriber",domain:this.domain,data:a};return e(b)},updateSubscription:function(a){var b={method:"UpdateSubscription",domain:this.domain,data:a};return e(b)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajaxWrapper.js":1,"./fault.js":5,"./metadata.js":6}],23:[function(a,b,c){(function(a){"use strict";var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports={domain:"Utility",filterBuckets:function(a,b){return c.grep(a,function(a){return-1===b.indexOf(a.CategoryId)})},filterBucketProducts:function(a,b){var d=a;return c.each(a,function(d){var e=a[d];e.Products&&e.Products.length>0&&(e.Products=c.grep(e.Products,function(a){return-1===b.indexOf(a)}))}),d},filterFeaturedItems:function(a,b){return c.grep(a,function(a){return-1===b.indexOf(a.ProductId)})},retrieveQualifiedStorefrontPageId:function(a,b){
var c=a;return-1===b.indexOf(a)&&(c=b[0]),c}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)});